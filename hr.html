<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>HR &amp; Employees · Patriot Auto Restyling</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="styles/hr.css" />
  <!-- Change made: employee name text is now forced to white for readability on dark backgrounds -->
</head>
<body>
  <header class="hr-header">
    <div class="hr-header-left">
      <h1>HR &amp; Employees</h1>
      <p class="hr-subtitle">
        Manage employees, departments, schedules, and shop availability from one place.
      </p>
    </div>
    <div class="hr-header-right">
      <a href="index.html" class="hr-btn hr-btn-ghost">← Back to Scheduler</a>
    </div>
  </header>

  <main class="hr-main">
    <aside class="hr-sidebar">
      <nav class="hr-tabs">
        <button class="hr-tab-button hr-tab-active" data-tab="employees">Employees</button>
        <button class="hr-tab-button" data-tab="timeoff">Time Off</button>
        <button class="hr-tab-button" data-tab="schedule">Schedule</button>
        <button class="hr-tab-button" data-tab="holidays">Holidays</button>
        <button class="hr-tab-button" data-tab="hours">Store Hours</button>
      </nav>

      <section class="hr-employees-list-panel" data-panel="employees">
        <div class="hr-panel-header">
          <h2>Employees</h2>
          <button id="btnNewEmployee" class="hr-btn hr-btn-primary">+ New Employee</button>
        </div>
        <div class="hr-search-box">
          <input
            id="employeeSearchInput"
            class="hr-input"
            placeholder="Search by name, role, or department..."
          />
        </div>
        <div id="employeeList" class="hr-employee-list">
          <!-- Filled by JS -->
        </div>
      </section>
    </aside>

    <section class="hr-content">
      <!-- EMPLOYEE DETAILS -->
      <section class="hr-tab-content hr-tab-content-active" data-tab="employees">
        <div class="hr-card hr-employee-card">
          <div class="hr-card-header">
            <h2 id="employeeFormTitle">Employee Profile</h2>
            <span id="employeeIdBadge" class="hr-pill hr-pill-muted" hidden></span>
          </div>

          <form id="employeeForm" class="hr-form" autocomplete="off">
            <input type="hidden" id="empId" />

            <div class="hr-form-grid">
              <div class="hr-field">
                <label>First Name</label>
                <input id="empFirstName" class="hr-input" required />
              </div>
              <div class="hr-field">
                <label>Last Name</label>
                <input id="empLastName" class="hr-input" required />
              </div>
    <div class="hr-field">
  <label>Role / Title</label>
  <select id="empRole" class="hr-select">
    <option value="">—</option>
    <option value="Tech">Tech</option>
    <option value="Service Writer">Service Writer</option>
    <option value="Manager">Manager</option>
    <option value="Admin">Admin</option>
  </select>
</div>

              <div class="hr-field">
                <label>Status</label>
                <select id="empStatus" class="hr-select">
                  <option value="Active">Active</option>
                  <option value="Inactive">Inactive</option>
                  <option value="Terminated">Terminated</option>
                </select>
              </div>

              <div class="hr-field">
                <label>Pay Type</label>
                <select id="empPayType" class="hr-select">
                  <option value="">—</option>
                  <option value="Hourly">Hourly</option>
                  <option value="Salary">Salary</option>
                  <option value="FlatRate">Flat Rate</option>
                  <option value="Commission">Commission</option>
                  <option value="Mixed">Mixed</option>
                </select>
              </div>
              <div class="hr-field">
                <label>Base Hourly Rate</label>
                <input id="empBaseRate" class="hr-input" type="number" step="0.01" />
              </div>
              <div class="hr-field">
                <label>Salary (Annual)</label>
                <input id="empSalary" class="hr-input" type="number" step="1" />
              </div>
              <div class="hr-field">
                <label>Flat Rate Multiplier</label>
                <input
                  id="empFlatMultiplier"
                  class="hr-input"
                  type="number"
                  step="0.01"
                  value="1"
                />
              </div>

              <div class="hr-field">
                <label>Default Commission Type</label>
                <select id="empCommType" class="hr-select">
                  <option value="">None</option>
                  <option value="PERCENT">Percent of service</option>
                  <option value="FLAT">Flat amount</option>
                </select>
              </div>
              <div class="hr-field">
                <label>Default Commission Value</label>
                <input
                  id="empCommValue"
                  class="hr-input"
                  type="number"
                  step="0.01"
                  placeholder="10 = 10% or $10"
                />
              </div>

              <div class="hr-field hr-field-full">
                <label>Departments (skill groups)</label>
                <div id="empDepartments" class="hr-department-chips">
                  <!-- Department chips from backend -->
                </div>
                <p class="hr-help">
                  Used to filter which services each employee can be scheduled for
                  (Detail, Tint, PPF, Ceramic, Accessories, etc.).
                </p>
              </div>

              <div class="hr-field hr-field-inline">
                <label class="hr-checkbox-label">
                  <input id="empIsTechnician" type="checkbox" />
                  <span>Show on scheduler grid as a technician</span>
                </label>
              </div>

              <div class="hr-field hr-field-full">
                <label>Notes</label>
                <textarea
                  id="empNotes"
                  class="hr-textarea"
                  rows="3"
                  placeholder="Skills, certifications, restrictions, etc."
                ></textarea>
              </div>
            </div>

            <div class="hr-form-actions">
              <button type="button" id="btnSaveEmployee" class="hr-btn hr-btn-primary">
                Save Employee
              </button>
              <button
                type="button"
                id="btnDeleteEmployee"
                class="hr-btn hr-btn-danger"
                disabled
              >
                Delete Employee
              </button>
            </div>
          </form>

          <div class="hr-callout">
            <strong>Future reports:</strong> this profile will feed flat-rate hours,
            commission, and productivity reports once we wire the reporting engine.
          </div>
        </div>
      </section>

          <!-- TIME OFF (fully wired) -->
      <section class="hr-tab-content" data-tab="timeoff">
        <div class="hr-card">
          <div class="hr-card-header">
            <h2>Employee Time Off</h2>
          </div>

          <div class="hr-hours-layout">
            <!-- Left: list / filters -->
            <section class="hr-hours-column">
              <h3>Existing Time Off</h3>
              <div class="hr-field">
                <label>Filter by employee</label>
                <select id="timeOffFilterEmployee" class="hr-select">
                  <option value="">All employees</option>
                </select>
              </div>
              <div id="timeOffList" class="hr-holiday-list">
                <!-- populated by JS -->
              </div>
            </section>

            <!-- Right: form -->
            <section class="hr-hours-column">
              <h3>Add / Edit Time Off</h3>
              <form id="timeOffForm" class="hr-form" autocomplete="off">
                <input type="hidden" id="timeOffId" />

                <div class="hr-form-grid">
                  <div class="hr-field hr-field-full">
                    <label>Employee</label>
                    <select id="timeOffEmployee" class="hr-select" required>
                      <option value="">Select employee...</option>
                    </select>
                  </div>

                  <div class="hr-field">
                    <label>Start date</label>
                    <input id="timeOffStartDate" type="date" class="hr-input" required />
                  </div>

                  <div class="hr-field">
                    <label>End date</label>
                    <input id="timeOffEndDate" type="date" class="hr-input" />
                  </div>

                  <div class="hr-field">
                    <label>Start time</label>
                    <input id="timeOffStartTime" type="time" class="hr-input" />
                  </div>

                  <div class="hr-field">
                    <label>End time</label>
                    <input id="timeOffEndTime" type="time" class="hr-input" />
                  </div>

                  <div class="hr-field hr-field-inline">
                    <label class="hr-checkbox-label">
                      <input id="timeOffAllDay" type="checkbox" />
                      <span>All day</span>
                    </label>
                  </div>

                  <div class="hr-field hr-field-full">
                    <label>Status</label>
                    <select id="timeOffStatus" class="hr-select">
                      <option value="Planned">Planned</option>
                      <option value="Approved">Approved</option>
                      <option value="Denied">Denied</option>
                      <option value="Cancelled">Cancelled</option>
                    </select>
                  </div>

                  <div class="hr-field hr-field-full">
                    <label>Reason / Notes</label>
                    <textarea id="timeOffReason" class="hr-textarea" rows="2"></textarea>
                  </div>
                </div>

                <div class="hr-form-actions">
                  <button type="button" id="btnSaveTimeOff" class="hr-btn hr-btn-primary">
                    Save Time Off
                  </button>
                  <button type="button" id="btnClearTimeOff" class="hr-btn hr-btn-ghost">
                    Clear
                  </button>
                  <button type="button" id="btnDeleteTimeOff" class="hr-btn hr-btn-danger" disabled>
                    Delete
                  </button>
                </div>
              </form>
            </section>
          </div>
        </div>
      </section>


      <!-- SCHEDULE: EMPLOYEE WEEKLY TEMPLATE -->
      <section class="hr-tab-content" data-tab="schedule">
        <div class="hr-card">
          <div class="hr-card-header">
            <h2>Employee Weekly Schedule</h2>
          </div>

          <div class="hr-field hr-field-full">
            <label>Employee</label>
            <select id="scheduleEmployee" class="hr-select">
              <option value="">Select employee...</option>
            </select>
            <p class="hr-muted">
              This defines the default weekly template for the selected employee
              (used by the scheduler to know when they are available).
            </p>
          </div>

          <div class="hr-schedule-grid-wrapper">
            <table class="hr-schedule-table">
              <thead>
                <tr>
                  <th>Day</th>
                  <th>Working</th>
                  <th>Start</th>
                  <th>End</th>
                  <th>Location</th>
                  <th>Bay</th>
                </tr>
              </thead>
              <tbody>
                <!-- One row per day, data-day will drive JS -->
                <tr data-day="Mon">
                  <td>Monday</td>
                  <td><input type="checkbox" class="sch-working" data-day="Mon" /></td>
                  <td><input type="time" class="hr-input sch-start" data-day="Mon" /></td>
                  <td><input type="time" class="hr-input sch-end" data-day="Mon" /></td>
                  <td><input type="text" class="hr-input sch-location" data-day="Mon" /></td>
                  <td><input type="text" class="hr-input sch-bay" data-day="Mon" /></td>
                </tr>
                <tr data-day="Tue">
                  <td>Tuesday</td>
                  <td><input type="checkbox" class="sch-working" data-day="Tue" /></td>
                  <td><input type="time" class="hr-input sch-start" data-day="Tue" /></td>
                  <td><input type="time" class="hr-input sch-end" data-day="Tue" /></td>
                  <td><input type="text" class="hr-input sch-location" data-day="Tue" /></td>
                  <td><input type="text" class="hr-input sch-bay" data-day="Tue" /></td>
                </tr>
                <tr data-day="Wed">
                  <td>Wednesday</td>
                  <td><input type="checkbox" class="sch-working" data-day="Wed" /></td>
                  <td><input type="time" class="hr-input sch-start" data-day="Wed" /></td>
                  <td><input type="time" class="hr-input sch-end" data-day="Wed" /></td>
                  <td><input type="text" class="hr-input sch-location" data-day="Wed" /></td>
                  <td><input type="text" class="hr-input sch-bay" data-day="Wed" /></td>
                </tr>
                <tr data-day="Thu">
                  <td>Thursday</td>
                  <td><input type="checkbox" class="sch-working" data-day="Thu" /></td>
                  <td><input type="time" class="hr-input sch-start" data-day="Thu" /></td>
                  <td><input type="time" class="hr-input sch-end" data-day="Thu" /></td>
                  <td><input type="text" class="hr-input sch-location" data-day="Thu" /></td>
                  <td><input type="text" class="hr-input sch-bay" data-day="Thu" /></td>
                </tr>
                <tr data-day="Fri">
                  <td>Friday</td>
                  <td><input type="checkbox" class="sch-working" data-day="Fri" /></td>
                  <td><input type="time" class="hr-input sch-start" data-day="Fri" /></td>
                  <td><input type="time" class="hr-input sch-end" data-day="Fri" /></td>
                  <td><input type="text" class="hr-input sch-location" data-day="Fri" /></td>
                  <td><input type="text" class="hr-input sch-bay" data-day="Fri" /></td>
                </tr>
                <tr data-day="Sat">
                  <td>Saturday</td>
                  <td><input type="checkbox" class="sch-working" data-day="Sat" /></td>
                  <td><input type="time" class="hr-input sch-start" data-day="Sat" /></td>
                  <td><input type="time" class="hr-input sch-end" data-day="Sat" /></td>
                  <td><input type="text" class="hr-input sch-location" data-day="Sat" /></td>
                  <td><input type="text" class="hr-input sch-bay" data-day="Sat" /></td>
                </tr>
                <tr data-day="Sun">
                  <td>Sunday</td>
                  <td><input type="checkbox" class="sch-working" data-day="Sun" /></td>
                  <td><input type="time" class="hr-input sch-start" data-day="Sun" /></td>
                  <td><input type="time" class="hr-input sch-end" data-day="Sun" /></td>
                  <td><input type="text" class="hr-input sch-location" data-day="Sun" /></td>
                  <td><input type="text" class="hr-input sch-bay" data-day="Sun" /></td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="hr-form-actions">
            <button type="button" id="btnSaveSchedule" class="hr-btn hr-btn-primary">
              Save Weekly Schedule
            </button>
            <button type="button" id="btnClearSchedule" class="hr-btn hr-btn-ghost">
              Clear For Employee
            </button>
          </div>
        </div>
      </section>

      <!-- HOLIDAYS -->
      <section class="hr-tab-content" data-tab="holidays">
        <div class="hr-card hr-hours-card">
          <div class="hr-card-header">
            <h2>Holiday Schedule</h2>
          </div>

          <div class="hr-hours-layout">
            <section class="hr-hours-column">
              <h3>Holiday Schedule</h3>
              <p class="hr-muted">
                This reads from your existing <code>Holidays</code> sheet using the
                existing backend endpoint (<code>action=loadHolidays</code>).
              </p>
              <div id="holidayList" class="hr-holiday-list">
                <!-- Populated from loadHolidays -->
              </div>
            </section>
          </div>

          <div class="hr-callout">
            <strong>Next step:</strong> we can add save/update endpoints for Holidays so this
            tab becomes the single source of truth for planned closures.
          </div>
        </div>
      </section>

      <!-- STORE HOURS -->
      <section class="hr-tab-content" data-tab="hours">
        <div class="hr-card hr-hours-card">
          <div class="hr-card-header">
            <h2>Store Hours</h2>
          </div>

          <div class="hr-hours-layout">
            <section class="hr-hours-column">
              <h3>Shop Hours (per day)</h3>
              <p class="hr-muted">
                We&apos;ll store these in a <code>ShopHours</code> sheet so the scheduler
                knows when the shop is generally open.
              </p>
              <div id="shopHoursList" class="hr-hours-list">
                <!-- Placeholder UI; backend wiring can be added later -->
                <div class="hr-muted small">
                  Future: editable open/close times for each day of week
                  (Mon–Sun), saved to a <strong>ShopHours</strong> sheet.
                </div>
              </div>
            </section>
          </div>

          <div class="hr-callout">
            <strong>Next step:</strong> we can add save/update endpoints for Shop Hours so this
            tab becomes the single source of truth for when the shop is open or closed.
          </div>
        </div>
      </section>
    </section>
  </main>

  <script>
  const GOOGLE_BACKEND_URL = 'https://script.google.com/macros/s/AKfycbw-g4GC3jVfLUc6RVkPfC5lbNCPHAeH9k-5JkdRnOwvk_vr0Q5ErmMAuTUrZl8r70mK/exec';
</script>
  <script src="scripts/hr.js"></script>
</body>
</html>
