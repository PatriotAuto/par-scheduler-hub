<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Patriot Auto Restyling – Scheduler Hub v1.8</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --par-navy:#050b18;--par-navy-soft:#0b1f33;--par-red:#e30613;--par-light:#f5f7fb;
      --par-border:#2b3950;--par-text:#fdfdfd;--par-muted:#9ca7c0;
      --dept-tint:#e53935;--dept-ppf:#2962ff;--dept-ceramic:#00c853;--dept-detail:#ffb300;--dept-electronics:#ab47bc;--timeoff:#8d8d8d;
      --grid-bg:#f2f4fb;--grid-header-bg:#e3e7f1;--grid-border-strong:rgba(0,0,0,.25);--grid-border-light:rgba(0,0,0,.15);
      --slot-height:32px;
      --tech-count:6;
      --cal-col-min:140px;
    }
    *{box-sizing:border-box;font-family:system-ui,-apple-system,BlinkMacSystem,"Segoe UI",sans-serif;}
    body{margin:0;background:radial-gradient(circle at top,#101b2e,#02040a);color:var(--par-text);}
    .page{min-height:100vh;display:flex;flex-direction:column;}
    header{padding:16px 24px;border-bottom:1px solid rgba(255,255,255,.08);display:flex;align-items:center;justify-content:space-between;gap:16px;background:linear-gradient(90deg,#050b18,#0a1727);}
    header .title{display:flex;flex-direction:column;gap:2px;}
    header .title h1{margin:0;font-size:20px;letter-spacing:.08em;text-transform:uppercase;}
    header .title span{font-size:12px;color:var(--par-muted);}
    .header-actions{display:flex;align-items:center;gap:10px;flex-wrap:wrap;}
    .header-btn{border-radius:999px;border:1px solid rgba(255,255,255,.25);background:rgba(227,6,19,.12);color:#fff;padding:6px 12px;font-size:11px;text-transform:uppercase;letter-spacing:.08em;cursor:pointer;}
    .header-btn.active{background:rgba(227,6,19,.3);}
    .header-btn:hover{background:rgba(227,6,19,.25);}
    .main{flex:1;display:flex;min-height:0;}
    .left{flex:1.4;border-right:1px solid rgba(255,255,255,.08);background:#e6e9f3;padding:14px;display:flex;flex-direction:column;gap:10px;min-width:0;}
    .right{flex:1;background:radial-gradient(circle at top right,#121b2d,#050915);padding:16px;min-width:0;display:flex;flex-direction:column;gap:10px;}
    .left-top-row{display:flex;justify-content:space-between;align-items:flex-start;gap:10px;flex-wrap:wrap;}
    .chips{display:flex;flex-wrap:wrap;gap:6px;}
    .chip{border-radius:999px;padding:4px 10px;font-size:11px;border:1px solid rgba(0,0,0,.1);background:rgba(255,255,255,.9);color:#374151;display:inline-flex;align-items:center;gap:6px;cursor:pointer;}
    .chip.active{border-color:var(--par-red);background:rgba(227,6,19,.08);color:#111827;}
    .chip .dot{width:8px;height:8px;border-radius:50%;}
    .dot-detail{background:var(--dept-detail);} .dot-tint{background:var(--dept-tint);} .dot-ppf{background:var(--dept-ppf);}
    .dot-ceramic{background:var(--dept-ceramic);} .dot-electronics{background:var(--dept-electronics);} .dot-timeoff{background:var(--timeoff);}
    .date-controls{display:flex;flex-direction:column;align-items:flex-end;gap:4px;font-size:12px;color:#4b5563;}
    .date-row{display:flex;align-items:center;gap:6px;}
    .nav-btn{border-radius:999px;border:1px solid rgba(0,0,0,.2);background:#fff;color:#111827;padding:4px 8px;font-size:11px;cursor:pointer;}
    .nav-btn:hover{background:#f3f4f6;}
    .date-label{font-size:12px;font-weight:600;letter-spacing:.06em;text-transform:uppercase;color:#111827;}
    #dayPicker{border-radius:999px;border:1px solid rgba(0,0,0,.2);background:#fff;color:#111827;font-size:11px;padding:4px 8px;cursor:pointer;}
    .cal-wrapper{flex:1;border-radius:12px;background:var(--grid-bg);border:3px solid var(--grid-border-strong);display:flex;flex-direction:column;overflow:hidden;min-height:260px;box-shadow:0 12px 24px rgba(15,23,42,.25);}
    .cal-scroll{flex:1;display:flex;flex-direction:column;overflow:auto;}
    .cal-header-row{display:grid;grid-template-columns:60px repeat(var(--tech-count),minmax(var(--cal-col-min),1fr));font-size:11px;padding:4px 4px 6px;border-bottom:3px solid var(--grid-border-strong);background:var(--grid-header-bg);position:sticky;top:0;z-index:5;min-width:calc(60px + var(--tech-count)*var(--cal-col-min));}
    .cal-header-cell{text-align:center;font-weight:600;color:#111827;}
    .cal-body{flex:1;display:flex;flex-direction:column;min-height:0;}
    .cal-row{display:grid;grid-template-columns:60px repeat(var(--tech-count),minmax(var(--cal-col-min),1fr));border-bottom:2px solid var(--grid-border-light);font-size:11px;background:linear-gradient(to right,rgba(255,255,255,.9),rgba(255,255,255,.9));height:var(--slot-height,32px);min-width:calc(60px + var(--tech-count)*var(--cal-col-min));}
    .cal-row:nth-child(2n){background:linear-gradient(to right,rgba(249,250,251,.95),rgba(249,250,251,.95));}
    .cal-time-cell{padding:2px 4px;text-align:right;color:#4b5563;font-weight:500;background:#e5e7eb;border-right:2px solid var(--grid-border-strong);}
    .cal-slot-cell{border-left:2px solid var(--grid-border-light);position:relative;cursor:pointer;background:transparent;transition:background .12s,box-shadow .12s,transform .05s;overflow:visible;}
    .cal-slot-cell:hover{background:rgba(227,6,19,.06);box-shadow:inset 0 0 0 1px rgba(227,6,19,.35);}
    .cal-slot-cell.selected{background:rgba(227,6,19,.1);box-shadow:inset 0 0 0 2px rgba(227,6,19,.8);transform:translateY(-1px);}
    .cal-slot-cell.off-shift{background:repeating-linear-gradient(45deg,rgba(15,23,42,.02),rgba(15,23,42,.02) 4px,rgba(15,23,42,.07) 4px,rgba(15,23,42,.07) 8px);}
    .cal-slot-cell.blocked-slot{background:linear-gradient(to right, rgba(227,6,19,0.08), rgba(227,6,19,0.14));}
    .cal-slot-inner{padding:1px 4px;height:100%;display:flex;align-items:center;gap:2px;overflow:hidden;}
    .blocked-preview{display:inline-flex;align-items:center;gap:6px;padding:2px 8px;border-radius:10px;background:rgba(255,255,255,.9);color:#111827;font-size:10px;box-shadow:0 1px 2px rgba(15,23,42,.18);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
    .blocked-preview .blocked-text{max-width:140px;overflow:hidden;text-overflow:ellipsis;}
    .cal-slot-cell.timeoff-block{
      background:linear-gradient(to right, rgba(141,141,141,0.25), rgba(141,141,141,0.35));
    }
        .cal-slot-cell.shop-closed{
      background:repeating-linear-gradient(
        45deg,
        rgba(220,38,38,0.06),
        rgba(220,38,38,0.06) 4px,
        rgba(220,38,38,0.16) 4px,
        rgba(220,38,38,0.16) 8px
      );
    }

    .event-pill{border-radius:999px;padding:1px 6px;font-size:10px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-shadow:0 1px 2px rgba(15,23,42,.25);display:inline-flex;align-items:center;gap:3px;}
    .event-bubble{position:absolute;left:2px;right:2px;top:2px;display:flex;flex-direction:column;gap:6px;padding:8px;border-radius:10px;color:#0b1324;background:rgba(255,255,255,.96);box-shadow:0 6px 16px rgba(0,0,0,.28);border:1px solid rgba(0,0,0,.08);overflow:hidden;}
    .event-bubble .bubble-header{display:flex;flex-direction:column;gap:4px;}
    .event-bubble .bubble-title{font-weight:700;font-size:12px;color:#0f172a;}
    .event-bubble .bubble-sub{font-size:11px;color:#1f2937;}
    .event-bubble .bubble-sub.muted{color:#6b7280;font-weight:600;}
    .event-bubble .bubble-icons{display:flex;align-items:center;gap:6px;flex-wrap:wrap;font-size:10px;}
    .event-bubble .bubble-foot{margin-top:auto;display:flex;justify-content:space-between;align-items:center;gap:6px;}
    .event-bubble .bubble-foot-left{display:flex;align-items:center;gap:4px;flex-wrap:wrap;}
    .event-bubble .bubble-foot .bubble-time{font-size:11px;font-weight:700;color:#0f172a;}
    .event-detailing{background:var(--dept-detail);}
    .event-tint{background:var(--dept-tint);color:#fff;}
    .event-ppf{background:var(--dept-ppf);color:#fff;}
    .event-ceramic{background:var(--dept-ceramic);}
    .event-electronics{background:var(--dept-electronics);color:#fff;}
    .event-bubble.event-detailing{border-left:5px solid var(--dept-detail);}
    .event-bubble.event-tint{border-left:5px solid var(--dept-tint);}
    .event-bubble.event-ppf{border-left:5px solid var(--dept-ppf);}
    .event-bubble.event-ceramic{border-left:5px solid var(--dept-ceramic);}
    .event-bubble.event-electronics{border-left:5px solid var(--dept-electronics);}
    .event-timeoff{background:var(--timeoff);color:#fff;}
    .event-status-icon{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;border-radius:50%;font-size:10px;font-weight:700;color:#111827;background:#fef3c7;}
    .event-status-icon.scheduled{background:#fef3c7;color:#92400e;}
    .event-status-icon.checkin{background:#dbeafe;color:#1e3a8a;}
    .event-status-icon.completed{background:#dcfce7;color:#166534;}
    .event-status-icon.cancelled{background:#fee2e2;color:#991b1b;}
    .event-status-icon.noshow{background:#ede9fe;color:#4c1d95;}
    .service-progress-icon{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;border-radius:6px;font-size:10px;font-weight:800;border:1px solid rgba(0,0,0,.12);background:#fff;color:#111827;}
    .service-progress-icon.queue{background:#fff7ed;color:#b45309;}
    .service-progress-icon.started{background:#e0f2fe;color:#075985;}
    .service-progress-icon.done{background:#dcfce7;color:#166534;}
    .invoice-icon{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;border-radius:50%;font-size:11px;font-weight:800;}
    .invoice-icon.pending{background:#fef3c7;color:#b45309;}
    .invoice-icon.paid{background:#dcfce7;color:#15803d;}
    .status-chip{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;font-size:10px;border:1px solid rgba(0,0,0,.1);background:#fff;color:#111827;}
    .status-summary{display:flex;align-items:center;gap:6px;flex-wrap:wrap;min-height:24px;}
    .status-summary-note{font-size:10px;color:#6b7280;}
    .small-badge{font-size:9px;padding:0 4px;border-radius:999px;background:rgba(0,0,0,.2);color:#f9fafb;text-transform:uppercase;}
    .cal-legend{margin:6px 8px 4px;display:flex;flex-wrap:wrap;gap:8px;font-size:10px;color:#4b5563;}
    .legend-item{display:inline-flex;align-items:center;gap:4px;background:rgba(255,255,255,.8);border-radius:999px;padding:2px 8px;border:1px solid rgba(0,0,0,.06);}
    .bottom-info-row{display:flex;gap:10px;padding:6px 8px 8px;border-top:1px solid rgba(0,0,0,.12);background:#e5e7f3;}
    .dealer-queue{
      flex:1;
      background:#f9fafb;
      border-radius:10px;
      border:1px solid rgba(0,0,0,.1);
      padding:6px 8px;
      font-size:11px;
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .dealer-queue{color:#000;}
    .dealer-queue-title{font-weight:700;text-transform:uppercase;letter-spacing:.08em;font-size:10px;color:#111827;}
    .dealer-queue-empty{font-size:10px;color:#6b7280;font-style:italic;}
    .dealer-queue-item{padding:4px 6px;border-radius:6px;background:#eef2ff;border:1px solid rgba(79,70,229,.3);display:flex;justify-content:space-between;align-items:center;gap:6px;}
    .dq-badge{
      padding:1px 5px;
      border-radius:999px;
      background:#e5e7eb;
      color:#000;
      font-size:9px;
      text-transform:uppercase;
    }
    .panel-title{font-size:13px;text-transform:uppercase;letter-spacing:.14em;color:var(--par-muted);}
    .panel-divider{height:1px;background:linear-gradient(90deg,rgba(255,255,255,.06),rgba(227,6,19,.6),rgba(255,255,255,.06));margin:4px 0 8px;}
    form{display:flex;flex-direction:column;gap:10px;flex:1;overflow-y:auto;padding-right:4px;}
    label{font-size:11px;text-transform:uppercase;letter-spacing:.12em;color:var(--par-muted);}
    input,select,textarea{width:100%;border-radius:8px;border:1px solid var(--par-border);background:rgba(10,18,38,.95);color:var(--par-text);font-size:13px;padding:8px 10px;outline:none;}
    input:focus,select:focus,textarea:focus{border-color:var(--par-red);box-shadow:0 0 0 1px rgba(227,6,19,.3);}
    input.date-input{cursor:pointer;}
    textarea{min-height:60px;resize:vertical;}
    .field-group{display:flex;flex-direction:column;gap:6px;}
    .field-row{display:flex;gap:8px;}
    .field-row .field-group{flex:1;}
    .service-row{display:grid;grid-template-columns:1.1fr 1.1fr 1fr 1fr .9fr .9fr 70px;gap:8px;align-items:end;}
    .service-row .btn{align-self:end;width:100%;}
    .input-actions{display:flex;gap:6px;align-items:center;}
    .input-actions input{flex:1;}
    .icon-button.subtle{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.15);padding:7px 10px;font-size:11px;}
    .icon-button.subtle:hover{background:rgba(227,6,19,.18);}
    .field-note{font-size:11px;color:var(--par-muted);}
    .inline-checkbox{display:flex;align-items:center;gap:6px;font-size:11px;color:var(--par-muted);}
    .inline-checkbox input[type=checkbox]{width:auto;}
    .status{font-size:11px;min-height:16px;color:var(--par-muted);}
    .actions{display:flex;gap:10px;margin-top:6px;flex-wrap:wrap;}
    .btn{border-radius:8px;padding:10px 14px;border:none;cursor:pointer;font-weight:600;text-transform:uppercase;letter-spacing:.06em;}
    .btn-primary{background:var(--par-red);color:#fff;flex:1;}
    .btn-clear{background:#263040;color:var(--par-muted);}
    .btn-danger{background:#7f1d1d;color:#fee2e2;}
    .btn-danger:hover{background:#991b1b;}
    .timeoff-note{font-size:11px;color:var(--par-muted);}
    .weekly-card{margin-top:8px;border-radius:10px;border:1px solid rgba(255,255,255,.12);padding:8px 10px;background:rgba(3,10,25,.9);display:flex;flex-direction:column;gap:6px;}
    .week-row{display:grid;grid-template-columns:90px 1fr 1fr 90px;gap:8px;align-items:center;font-size:12px;}
    .week-row-label{font-size:11px;text-transform:uppercase;letter-spacing:.08em;color:var(--par-muted);}
    .week-row select{background:rgba(10,18,38,.95);border-radius:6px;border:1px solid var(--par-border);color:var(--par-text);font-size:12px;padding:4px 6px;}
    .week-row-off{display:flex;align-items:center;gap:4px;font-size:11px;color:var(--par-muted);}
    @media(max-width:1000px){
      .main{flex-direction:column;}
      .left{border-right:none;border-bottom:1px solid rgba(255,255,255,.08);}
    }
    @media(max-width:768px){
      header{
        padding:12px 14px;
        flex-direction:column;
        align-items:flex-start;
        gap:8px;
      }
      .header-actions{
        width:100%;
        justify-content:flex-start;
        flex-wrap:wrap;
      }
      .left,.right{
        padding:10px;
      }
      .chips{
        width:100%;
      }
      .cal-wrapper{
        min-height:220px;
      }
      .cal-scroll{
        overflow:auto;
      }
      .cal-header-row,
      .cal-row{
        min-width:calc(60px + var(--tech-count)*var(--cal-col-min));
        height:32px;
      }
      .service-row{
        grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
        align-items:start;
      }
      .service-row .btn{
        margin-top:4px;
        width:100%;
      }
      .bottom-info-row{
        flex-direction:column;
      }
      .dealer-queue{
        width:100%;
      }
      .btn{
        padding:9px 10px;
        font-size:11px;
      }
      input,select,textarea{
        font-size:12px;
        padding:7px 9px;
      }
    }
    @media(max-width:540px){
      .service-row{
        grid-template-columns:1fr;
      }
      .service-row .field-group{min-width:0;}
    }

    /* Appointment pop-up */
    .popup-backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.65);z-index:1500;padding:12px;}
    .popup-card{background:#0b1324;border:1px solid rgba(255,255,255,.12);border-radius:12px;max-width:520px;width:100%;box-shadow:0 18px 40px rgba(0,0,0,.45);color:#f9fafb;display:flex;flex-direction:column;}
    .popup-header{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.08);}
    .popup-title{display:flex;flex-direction:column;gap:4px;}
    .popup-title h3{margin:0;font-size:16px;letter-spacing:.08em;text-transform:uppercase;}
    .popup-title span{font-size:12px;color:var(--par-muted);}
    .popup-actions{display:flex;align-items:center;gap:8px;}
    .icon-button{border:none;background:rgba(255,255,255,.08);color:#f9fafb;border-radius:8px;padding:6px 10px;cursor:pointer;display:inline-flex;align-items:center;gap:6px;font-weight:600;letter-spacing:.04em;}
    .icon-button:hover{background:rgba(227,6,19,.22);}
    .popup-body{padding:12px 14px;display:flex;flex-direction:column;gap:10px;}
    .popup-row{display:flex;gap:8px;align-items:center;flex-wrap:wrap;}
    .popup-badge{padding:4px 8px;border-radius:8px;background:rgba(255,255,255,.08);font-size:11px;display:inline-flex;align-items:center;gap:6px;}
    .popup-list{border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:10px;background:rgba(5,11,24,.6);display:flex;flex-direction:column;gap:6px;}
    .popup-list-item{display:flex;justify-content:space-between;gap:10px;align-items:center;font-size:12px;padding:6px 8px;border-radius:8px;background:rgba(255,255,255,.04);}
    .popup-list-item select{min-width:130px;}
    .popup-close{border:none;background:none;color:var(--par-muted);font-size:18px;cursor:pointer;}

    /* Custom date picker */
    .date-picker-popup{
      position:absolute;
      z-index:1000;
      width:230px;
      background:#111827;
      color:#f9fafb;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.15);
      box-shadow:0 12px 25px rgba(15,23,42,.6);
      padding:8px;
      font-size:12px;
      display:none;
    }
    .date-picker-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:4px;
    }
    .date-picker-header button{
      border:none;
      background:rgba(15,23,42,.8);
      color:#e5e7eb;
      border-radius:999px;
      padding:2px 6px;
      cursor:pointer;
      font-size:11px;
    }
    .date-picker-month{
      font-weight:600;
      letter-spacing:.06em;
      text-transform:uppercase;
      font-size:11px;
    }
    .date-picker-grid{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:2px;
    }
    .date-picker-cell{
      text-align:center;
      padding:4px 0;
      border-radius:6px;
      cursor:pointer;
    }
    .date-picker-cell.disabled{
      color:#6b7280;
      cursor:default;
    }
    .date-picker-cell.day-name{
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.08em;
      color:#9ca3af;
      cursor:default;
    }
    .date-picker-cell.day{
      background:rgba(15,23,42,.9);
    }
    .date-picker-cell.day:hover{
      background:rgba(227,6,19,.6);
    }
    .date-picker-cell.selected{
      background:var(--par-red);
      font-weight:700;
    }
    .date-picker-cell.today{
      border:1px solid var(--par-red);
    }

.global-search {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  border-bottom: 1px solid #e5e7eb;
  background: #f9fafb;
}

.global-search input {
  flex: 1 1 auto;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid #d1d5db;
  font-size: 0.9rem;
}

.btn-global-search {
  padding: 6px 12px;
  font-size: 0.85rem;
}

/* Overlay */

.global-search-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: none;
}

.global-search-overlay-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(15, 23, 42, 0.45);
}

.global-search-modal {
  position: relative;
  margin: 40px auto;
  max-width: 900px;
  max-height: 80vh;
  background: #ffffff;
  border-radius: 10px;
  box-shadow: 0 10px 40px rgba(15, 23, 42, 0.3);
  padding: 16px 18px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.global-search-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.global-search-modal-header h2 {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
}

.global-search-summary {
  font-size: 0.85rem;
  color: #6b7280;
  margin-bottom: 8px;
}

.global-search-sections {
  display: flex;
  flex: 1 1 auto;
  gap: 12px;
  overflow: auto;
}

.global-search-section {
  flex: 1 1 260px;
  min-width: 0;
}

.global-search-section h3 {
  margin: 0 0 4px;
  font-size: 0.9rem;
  font-weight: 600;
  color: #111827;
}

.search-modal {
  background: #ffffff !important;
  color: #000000 !important;
  padding: 25px !important;
  border-radius: 12px !important;
  max-width: 800px !important;
  width: 90% !important;
}

.search-modal h2,
.search-modal h3,
.search-modal h4,
.search-modal p,
.search-modal span,
.search-modal div {
  color: #000 !important;
}

.search-result-entry {
  padding: 10px 12px;
  border: 1px solid #ddd;
  border-radius: 8px;
  margin-bottom: 10px;
  background: #f5f5f5;
}

.search-result-entry:hover {
  background: #e9e9e9;
}

.search-result-entry .title {
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 4px;
  color: #000 !important;
}

.search-result-entry .details {
  font-size: 14px;
  line-height: 1.3;
  color: #333 !important;
}

.search-modal-overlay {
  background: rgba(0,0,0,0.55) !important;
}

/* Reuse lookup-list styles already defined, but ensure scroll */

.global-search-section .lookup-list {
  max-height: 230px;
  overflow-y: auto;
}

/* Appointments table inside modal */

#globalSearchAppointmentsTableWrapper {
  display: none;
}

#globalSearchAppointmentsTable {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.8rem;
}

#globalSearchAppointmentsTable th,
#globalSearchAppointmentsTable td {
  padding: 6px 8px;
  border-bottom: 1px solid #e5e7eb;
}

#globalSearchAppointmentsTable tbody tr:hover {
  background: #f9fafb;
}

/* PAR logo inside the header */
.par-logo-container {
  display: flex;
  align-items: center;
  gap: 8px;
}

.par-logo {
  height: 40px;
  object-fit: contain;
}

@media (max-width: 768px) {
  header {
    flex-direction: column;
    align-items: flex-start;
  }

  .main {
    flex-direction: column;
  }

  .left,
  .right {
    width: 100%;
    max-width: 100%;
    min-width: 0;
  }

  .left-top-row {
    flex-direction: column;
    align-items: stretch;
  }

  #globalSearchBar,
  .global-search {
    flex-direction: column;
    align-items: stretch;
  }

  .global-search input {
    width: 100%;
  }

  .btn-global-search {
    align-self: flex-end;
    margin-top: 4px;
  }

  .global-search-modal,
  .search-modal {
    width: 95vw;
    margin: 10px auto;
    max-height: 85vh;
  }
}

.customer-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}

.customer-table th,
.customer-table td {
  padding: 10px 12px;
  vertical-align: top;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.customer-table th {
  font-weight: 700;
}

.customer-table .col-name { width: 22%; white-space: normal; word-break: break-word; }
.customer-table .col-phone { width: 14%; }
.customer-table .col-email { width: 26%; }
.customer-table .col-lastservice { width: 18%; }
.customer-table .col-vehicle { width: 20%; }

@media (max-width: 900px) {
  .customer-table th, .customer-table td { font-size: 14px; }
  .customer-table .col-email { width: 30%; }
}

.alpha-bar {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  padding: 10px 0 14px;
  border-bottom: 1px solid rgba(255,255,255,0.08);
}
.alpha-btn {
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.06);
  cursor: pointer;
  user-select: none;
  font-weight: 600;
  font-size: 13px;
  color: #fff;
}
.alpha-btn.active {
  background: rgba(255,255,255,0.18);
  border-color: rgba(255,255,255,0.35);
}
.alpha-count {
  opacity: 0.75;
  margin-left: 6px;
  font-weight: 600;
  font-size: 12px;
}

.profile-drawer {
  position: fixed;
  inset: 0;
  display: none;
  background: rgba(0,0,0,0.45);
  z-index: 9999;
}
.profile-drawer.open { display: block; }
.profile-drawer__panel {
  position: absolute;
  top: 0; right: 0;
  height: 100%;
  width: min(520px, 92vw);
  background: rgba(12,18,32,0.98);
  border-left: 1px solid rgba(255,255,255,0.12);
  padding: 16px;
  overflow: auto;
}
.profile-drawer__header {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  align-items: flex-start;
  padding-bottom: 12px;
  border-bottom: 1px solid rgba(255,255,255,0.12);
}
.profile-title { font-size: 20px; font-weight: 800; }
.profile-sub { opacity: 0.75; margin-top: 4px; }
.profile-close {
  background: transparent;
  border: 1px solid rgba(255,255,255,0.25);
  border-radius: 10px;
  padding: 6px 10px;
  cursor: pointer;
  color: #fff;
}
.profile-body { padding: 12px 0; }
.profile-row { display: grid; grid-template-columns: 120px 1fr; gap: 10px; padding: 8px 0; }
.profile-label { opacity: 0.7; font-weight: 700; }
.profile-actions { display: flex; gap: 10px; flex-wrap: wrap; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.12); }
</style>
</head>
<body>
  <div class="page">
    <header>
      <div class="title">
        <div class="par-logo-container">
          <img
            src="assets/img/FullLogo_Transparent_NoBuffer (1).png"
            alt="Patriot Auto Restyling Logo"
            class="par-logo"
          />
        </div>
        <span>Internal Scheduler Hub · Daily Tech View</span>
      </div>
      <div class="header-actions">
        <a href="index.html" class="header-btn nav-button">Back to Scheduler</a>
      </div>
    </header>

    <div id="globalSearchBar" class="global-search">
      <input
        id="globalSearchInput"
        type="text"
        placeholder="Search by name, phone, email, VIN, or stock #..."
        autocomplete="off"
      />
      <button id="globalSearchButton" type="button" class="btn btn-primary btn-global-search">
        Search
      </button>
    </div>

    <h1 class="page-title" style="padding: 16px 24px 0; margin: 0;">Customer Profiles</h1>

    <div class="customers-toolbar" style="padding: 12px 24px 0;">
      <input
        id="customerSearchInput"
        type="text"
        placeholder="Search by name, phone, or email..."
      />
      <span id="customersStatus" class="status-text"></span>
    </div>

    <div id="customersError" class="error-text" style="padding: 4px 24px;"></div>

    <div style="padding: 0 24px;">
      <div class="alpha-bar" id="alphaBar"></div>
    </div>

    <div style="padding: 0 24px 16px;">
      <table class="customer-table customers-table">
        <thead>
          <tr>
            <th class="col-name">Name</th>
            <th class="col-phone">Phone</th>
            <th class="col-email">Email</th>
            <th class="col-lastservice">Last Service</th>
            <th class="col-vehicle">Vehicle</th>
          </tr>
        </thead>
        <tbody id="customersTableBody"></tbody>
      </table>
    </div>

    <div class="main">
    <div class="left" style="display:none;">
      <div class="left-top-row">
        <div class="chips" id="chipsContainer"></div>
        
        <div class="date-controls">
          <div class="date-row">
            <button class="nav-btn" id="btnPrevDay">◀</button>
            <span class="date-label" id="dayLabel">Today</span>
            <button class="nav-btn" id="btnNextDay">▶</button>
          </div>
          <div class="date-row">
            <span style="font-size:10px;">Jump to date:</span>
            <input type="text" id="dayPicker" class="date-input" placeholder="YYYY-MM-DD" readonly />
          </div>
        </div>
      </div>

      <div class="cal-wrapper">
        <div class="cal-legend" aria-label="Status legend">
          <span class="legend-item"><span class="event-status-icon scheduled">S</span>Scheduled</span>
          <span class="legend-item"><span class="event-status-icon checkin">I</span>Check In</span>
          <span class="legend-item"><span class="event-status-icon completed">C</span>Completed</span>
          <span class="legend-item"><span class="event-status-icon cancelled">X</span>Cancelled</span>
          <span class="legend-item"><span class="event-status-icon noshow">N</span>No Show</span>
          <span class="legend-item"><span class="service-progress-icon queue">⏳</span>In Queue</span>
          <span class="legend-item"><span class="service-progress-icon started">▶</span>Started</span>
          <span class="legend-item"><span class="service-progress-icon done">✔</span>Completed</span>
          <span class="legend-item"><span class="invoice-icon pending">$</span>Invoiced</span>
          <span class="legend-item"><span class="invoice-icon paid">$</span>Paid</span>
        </div>
        <div class="cal-scroll">
          <div class="cal-header-row" id="calHeaderRow"></div>
          <div class="cal-body" id="calBody"></div>
        </div>
        <div class="cal-legend">
          <span class="legend-item"><span class="dot dot-detail"></span>Detailing</span>
          <span class="legend-item"><span class="dot dot-tint"></span>Tint</span>
          <span class="legend-item"><span class="dot dot-ppf"></span>PPF</span>
          <span class="legend-item"><span class="dot dot-ceramic"></span>Ceramic</span>
          <span class="legend-item"><span class="dot dot-electronics"></span>Electronics</span>
          <span class="legend-item"><span class="dot dot-timeoff"></span>Tech Time Off</span>
        </div>
        <div class="bottom-info-row">
          <div class="dealer-queue">
            <div class="dealer-queue-title">Dealer Queue (Today)</div>
            <div id="dealerQueueList" class="dealer-queue-empty">No dealer jobs queued for this day.</div>
          </div>
        </div>
      </div>
    </div>

    <div class="right">
      <!-- Appointments -->
      <div id="appointmentPanel" style="display:none;">
        <div class="panel-title">Create / Edit Appointment</div>
        <div class="panel-divider"></div>
        <form id="appointmentForm" onsubmit="return false;">
          <div class="field-row">
            <div class="field-group">
              <label>Customer First Name</label>
              <input id="inputCustomerFirstName" placeholder="First name" />
            </div>
            <div class="field-group">
              <label>Customer Last Name</label>
              <input id="inputCustomerLastName" placeholder="Last name" />
            </div>
            <div class="field-group">
              <label>&nbsp;</label>
              <div class="inline-checkbox">
                <input type="checkbox" id="checkboxDealer" />
                <span>Dealer Job (Dealer Queue)</span>
              </div>
            </div>
          </div>
          <div class="field-row">
            <div class="field-group">
              <label>Phone</label>
              <input id="inputCustomerPhone" placeholder="(555) 123-4567" />
            </div>
            <div class="field-group">
              <label>Email</label>
              <input type="email" id="inputCustomerEmail" placeholder="email@example.com" />
            </div>
          </div>
          <div class="field-row">
            <div class="field-group" style="flex:1.4;">
              <label>VIN</label>
              <div class="input-actions">
                <input id="inputVin" placeholder="Scan or enter VIN" maxlength="17" />
                <button type="button" class="icon-button subtle" id="btnVinScan">VIN Scan</button>
              </div>
              <div class="field-note" id="vinHelperText">Scan VIN to auto-fill year, make, and model.</div>
            </div>
            <div class="field-group">
              <label>Stock #</label>
              <input id="inputStockNumber" placeholder="Inventory ID" />
            </div>
          </div>
          <div class="field-row">
            <div class="field-group">
              <label>Year</label>
              <select id="vehicleYearSelect"></select>
            </div>
            <div class="field-group">
              <label>Make</label>
              <select id="vehicleMakeSelect" disabled></select>
            </div>
            <div class="field-group">
              <label>Model</label>
              <select id="vehicleModelSelect" disabled></select>
            </div>
          </div>
          <div class="field-row">
            <div class="field-group">
              <label>Appointment Date</label>
              <input type="text" id="datePicker" class="date-input" placeholder="YYYY-MM-DD" readonly />
            </div>
            <div class="field-group">
              <label>&nbsp;</label>
              <div class="inline-checkbox">
                <input type="checkbox" id="checkboxCustomerWaiting" />
                <span>Customer Waiting</span>
              </div>
            </div>
          </div>

          <div class="field-group">
            <label>Service & Technician Assignments</label>
            <div id="serviceAssignments"></div>
            <button type="button" class="btn btn-clear" id="btnAddServiceRow" style="margin-top:6px;">+ Add Service</button>
          </div>

          <div class="field-row">
            <div class="field-group">
              <label>Ride / Pickup Options</label>
              <div class="inline-checkbox">
                <input type="checkbox" id="checkboxRideNeeded" />
                <span>Ride Needed</span>
              </div>
              <div class="field-group">
                <label style="font-size:10px;text-transform:none;letter-spacing:0;">Ride Time</label>
                <select id="inputRideTime"></select>
              </div>
              <div class="inline-checkbox">
                <input type="checkbox" id="checkboxPickupDelivery" />
                <span>Pickup / Delivery</span>
              </div>
            </div>
            <div class="field-group">
              <label>Pickup / Delivery Times</label>
              <div class="field-group">
                <label style="font-size:10px;text-transform:none;letter-spacing:0;">Pickup Time</label>
                <select id="inputPickupTime"></select>
              </div>
              <div class="field-group">
                <label style="font-size:10px;text-transform:none;letter-spacing:0;">Delivery Time</label>
                <select id="inputDeliveryTime"></select>
              </div>
            </div>
          </div>
<div class="field-group">
  <label>Notes</label>
  <textarea id="inputNotes" placeholder="Deposit paid? Keys in drop box?"></textarea>
</div>

<div class="field-group">
  <label>Status &amp; Billing</label>
  <div id="statusSummary" class="status-summary"></div>
  <div class="timeoff-note">Update status or billing from the appointment pop-up.</div>
  <select id="inputStatus" style="display:none;" disabled>
    <option value="Scheduled">Scheduled</option>
    <option value="Check In">Check In</option>
    <option value="Cancelled">Cancelled</option>
    <option value="No Show">No Show</option>
    <option value="Completed">Completed</option>
  </select>
  <div style="display:none;">
    <input type="checkbox" id="checkboxInvoiced" />
    <input type="checkbox" id="checkboxPaid" />
  </div>
</div>

<div class="inline-checkbox" style="margin-top:4px;">
  <input type="checkbox" id="checkboxOverrideClosed" />
  <span>Override shop hours & holidays for this booking</span>
</div>

<div class="status" id="statusText">Click a tech/time slot on the left or pick a date here to start. Click an existing pill to edit.</div>

          <div class="actions">
            <button type="button" class="btn btn-clear" id="btnClear">Clear</button>
            <button type="button" class="btn btn-danger" id="btnDeleteAppointment">Delete</button>
            <button type="button" class="btn btn-primary" id="btnCreateAppointment">Save Appointment</button>
          </div>
        </form>
      </div>

      <!-- Time off -->
      <div id="timeOffPanel" style="display:none;">
        <div class="panel-title">Tech Time Off</div>
        <div class="panel-divider"></div>
        <form id="timeOffForm" onsubmit="return false;">
          <div class="field-row">
            <div class="field-group">
              <label>Technician</label>
              <select id="timeOffTechnician">
                <option value="">Select tech</option>
                <option>William</option><option>Limage</option><option>Kaiden</option><option>Luke</option><option>Fafa</option><option>Matt</option>
              </select>
            </div>
          </div>
          <div class="field-row">
            <div class="field-group">
              <label>Start Date</label>
              <input type="text" id="timeOffStartDate" class="date-input" placeholder="YYYY-MM-DD" readonly />
            </div>
            <div class="field-group">
              <label>End Date</label>
              <input type="text" id="timeOffEndDate" class="date-input" placeholder="YYYY-MM-DD" readonly />
            </div>
          </div>

          <div class="field-row">
            <div class="field-group">
              <label>&nbsp;</label>
              <div class="inline-checkbox">
                <input type="checkbox" id="timeOffAllDay" />
                <span>All day (block full working hours for each date)</span>
              </div>
            </div>
          </div>
          <div class="field-row">
            <div class="field-group">
              <label>Start Time</label>
              <select id="timeOffStartTime"></select>
            </div>
            <div class="field-group">
              <label>End Time</label>
              <select id="timeOffEndTime"></select>
            </div>
          </div>
          <div class="field-group">
            <label>Notes</label>
            <textarea id="timeOffNotes" placeholder="Reason for time off (optional)"></textarea>
          </div>
          <div class="timeoff-note">Leave Start/End Time empty to block the full working day for the date range.</div>
          <div class="actions">
            <button type="button" class="btn btn-clear" id="btnClearTimeOff">Clear</button>
            <button type="button" class="btn btn-danger" id="btnDeleteTimeOff">Delete Time Off</button>
            <button type="button" class="btn btn-primary" id="btnSaveTimeOff">Save Time Off</button>
          </div>
        </form>
      </div>

      <!-- Tech schedules -->
      <div id="schedulesPanel" style="display:none;">
        <div class="panel-title">Tech Schedules</div>
        <div class="panel-divider"></div>
        <form id="schedulesForm" onsubmit="return false;">
          <div class="field-group">
            <label>Select Technician</label>
            <select id="scheduleTechSelect">
              <option value="">Choose tech</option>
              <option>William</option><option>Limage</option><option>Kaiden</option><option>Luke</option><option>Fafa</option><option>Matt</option>
            </select>
          </div>
          <div class="weekly-card">
            <div class="week-row">
              <div class="week-row-label">Monday</div>
              <select id="sched_Monday_start"></select>
              <select id="sched_Monday_end"></select>
              <div class="week-row-off"><input type="checkbox" id="sched_Monday_off" /><span>Off?</span></div>
            </div>
            <div class="week-row">
              <div class="week-row-label">Tuesday</div>
              <select id="sched_Tuesday_start"></select>
              <select id="sched_Tuesday_end"></select>
              <div class="week-row-off"><input type="checkbox" id="sched_Tuesday_off" /><span>Off?</span></div>
            </div>
            <div class="week-row">
              <div class="week-row-label">Wednesday</div>
              <select id="sched_Wednesday_start"></select>
              <select id="sched_Wednesday_end"></select>
              <div class="week-row-off"><input type="checkbox" id="sched_Wednesday_off" /><span>Off?</span></div>
            </div>
            <div class="week-row">
              <div class="week-row-label">Thursday</div>
              <select id="sched_Thursday_start"></select>
              <select id="sched_Thursday_end"></select>
              <div class="week-row-off"><input type="checkbox" id="sched_Thursday_off" /><span>Off?</span></div>
            </div>
            <div class="week-row">
              <div class="week-row-label">Friday</div>
              <select id="sched_Friday_start"></select>
              <select id="sched_Friday_end"></select>
              <div class="week-row-off"><input type="checkbox" id="sched_Friday_off" /><span>Off?</span></div>
            </div>
            <div class="week-row">
              <div class="week-row-label">Saturday</div>
              <select id="sched_Saturday_start"></select>
              <select id="sched_Saturday_end"></select>
              <div class="week-row-off"><input type="checkbox" id="sched_Saturday_off" /><span>Off?</span></div>
            </div>
            <div class="week-row">
              <div class="week-row-label">Sunday</div>
              <select id="sched_Sunday_start"></select>
              <select id="sched_Sunday_end"></select>
              <div class="week-row-off"><input type="checkbox" id="sched_Sunday_off" /><span>Off?</span></div>
            </div>
          </div>
          <div class="timeoff-note">These hours control which parts of the grid show as off-shift for each tech, per weekday. (Saved in this browser.)</div>
          <div class="actions">
            <button type="button" class="btn btn-primary" id="btnSaveSchedules">Save Tech Schedule</button>
          </div>
                    <!-- ⬇️ BEGIN SHOP HOURS & HOLIDAYS BLOCK ⬇️ -->
          <div class="panel-divider" style="margin-top:12px;"></div>
          <div class="panel-title" style="font-size:11px;">Shop Hours</div>

          <div class="weekly-card" id="officeHoursCard">
            <div class="week-row">
              <div class="week-row-label">Monday</div>
              <select id="office_Monday_open"></select>
              <select id="office_Monday_close"></select>
              <div class="week-row-off"><input type="checkbox" id="office_Monday_closed" /><span>Closed?</span></div>
            </div>
            <div class="week-row">
              <div class="week-row-label">Tuesday</div>
              <select id="office_Tuesday_open"></select>
              <select id="office_Tuesday_close"></select>
              <div class="week-row-off"><input type="checkbox" id="office_Tuesday_closed" /><span>Closed?</span></div>
            </div>
            <div class="week-row">
              <div class="week-row-label">Wednesday</div>
              <select id="office_Wednesday_open"></select>
              <select id="office_Wednesday_close"></select>
              <div class="week-row-off"><input type="checkbox" id="office_Wednesday_closed" /><span>Closed?</span></div>
            </div>
            <div class="week-row">
              <div class="week-row-label">Thursday</div>
              <select id="office_Thursday_open"></select>
              <select id="office_Thursday_close"></select>
              <div class="week-row-off"><input type="checkbox" id="office_Thursday_closed" /><span>Closed?</span></div>
            </div>
            <div class="week-row">
              <div class="week-row-label">Friday</div>
              <select id="office_Friday_open"></select>
              <select id="office_Friday_close"></select>
              <div class="week-row-off"><input type="checkbox" id="office_Friday_closed" /><span>Closed?</span></div>
            </div>
            <div class="week-row">
              <div class="week-row-label">Saturday</div>
              <select id="office_Saturday_open"></select>
              <select id="office_Saturday_close"></select>
              <div class="week-row-off"><input type="checkbox" id="office_Saturday_closed" /><span>Closed?</span></div>
            </div>
            <div class="week-row">
              <div class="week-row-label">Sunday</div>
              <select id="office_Sunday_open"></select>
              <select id="office_Sunday_close"></select>
              <div class="week-row-off"><input type="checkbox" id="office_Sunday_closed" /><span>Closed?</span></div>
            </div>
          </div>

          <div class="panel-title" style="font-size:11px;margin-top:8px;">Shop Holidays</div>
          <div class="weekly-card">
            <div class="week-row" style="grid-template-columns:120px 1fr 120px;">
              <div class="week-row-label">Add Holiday</div>
              <input id="holidayDateInput" class="date-input" placeholder="YYYY-MM-DD" readonly />
              <input id="holidayLabelInput" placeholder="e.g., New Year's Day" />
            </div>
            <div class="actions" style="margin-top:4px;">
              <button type="button" class="btn btn-primary" id="btnAddHoliday">Add Holiday</button>
            </div>
            <div class="timeoff-note" style="margin-top:4px;">These dates are treated as fully closed unless overridden on an appointment.</div>
            <div id="holidayList" class="timeoff-note" style="margin-top:6px;">No holidays configured.</div>
          </div>
          <!-- ⬆️ END SHOP HOURS & HOLIDAYS BLOCK ⬆️ -->

          <div class="status" id="scheduleStatus"></div>
        </form>
      </div>

      <!-- Services library -->
      <div id="servicesPanel" style="display:none;">
        <div class="panel-title">Service Library</div>
        <div class="panel-divider"></div>
        <form id="servicesForm" onsubmit="return false;">
          <div class="field-group">
            <label>Service Categories & Packages</label>
            <div id="serviceCategoriesList"></div>
          </div>
          <div class="field-row">
            <div class="field-group">
              <label>Add New Category</label>
              <input id="inputNewCategoryName" placeholder="e.g., Accessories" />
            </div>
            <div class="field-group" style="align-self:flex-end;">
              <button type="button" class="btn btn-primary" id="btnAddCategory">Add Category</button>
            </div>
          </div>
          <div class="timeoff-note">These services are saved in this browser and power the dropdowns in the appointment form.</div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Custom Date Picker element -->
<div id="datePickerPopup" class="date-picker-popup">
  <div class="date-picker-header">
    <button type="button" id="dpPrevMonth">◀</button>
    <div class="date-picker-month" id="dpMonthLabel">MONTH YYYY</div>
    <button type="button" id="dpNextMonth">▶</button>
  </div>
  <div class="date-picker-grid" id="dpGrid"></div>
</div>

<!-- Appointment pop-up -->
<div id="appointmentPopup" class="popup-backdrop">
  <div class="popup-card">
    <div class="popup-header">
      <div class="popup-title">
        <h3 id="popupTitle">Appointment</h3>
        <span id="popupSubtitle"></span>
      </div>
      <div class="popup-actions">
        <div class="status-chip" id="popupStatusChip">
          <span class="event-status-icon scheduled" id="popupStatusIcon">S</span>
          <span id="popupStatusLabel">Scheduled</span>
        </div>
        <button class="icon-button" id="btnUnlockEditing">✏️ Edit</button>
        <button class="popup-close" id="btnClosePopup">✕</button>
      </div>
    </div>
    <div class="popup-body">
      <div class="popup-row">
        <label style="font-size:11px;letter-spacing:.08em;">Status</label>
        <select id="popupStatusSelect" style="flex:1;max-width:200px;">
          <option>Scheduled</option>
          <option>Check In</option>
          <option>Cancelled</option>
          <option>No Show</option>
          <option>Completed</option>
        </select>
      </div>
      <div class="popup-row">
        <label style="font-size:11px;letter-spacing:.08em;">Billing</label>
        <div class="inline-checkbox" style="color:#f9fafb;">
          <input type="checkbox" id="popupInvoiced" />
          <span>Invoiced <span class="invoice-icon pending" style="margin-left:4px;">$</span></span>
        </div>
        <div class="inline-checkbox" style="color:#f9fafb;">
          <input type="checkbox" id="popupPaid" />
          <span>Paid <span class="invoice-icon paid" style="margin-left:4px;">$</span></span>
        </div>
      </div>
      <div class="popup-row" id="popupQuickFlags"></div>
      <div class="popup-list" id="popupServicesList"></div>
    </div>
  </div>
</div>

<div id="globalSearchOverlay" class="global-search-overlay search-modal-overlay" style="display:none;">
  <div class="global-search-overlay-backdrop"></div>
  <div class="global-search-modal search-modal">
    <div class="global-search-modal-header">
      <h2>Search Results</h2>
      <button type="button" id="globalSearchCloseButton" class="btn-xs">Close</button>
    </div>

    <div id="globalSearchSummary" class="global-search-summary"></div>

    <div class="global-search-sections">
      <section class="global-search-section">
        <h3>Customers</h3>
        <div id="globalSearchCustomersEmpty" class="empty-state">
          No customers found for this search.
        </div>
        <ul id="globalSearchCustomersList" class="lookup-list"></ul>
      </section>

      <section class="global-search-section">
        <h3>Appointments</h3>
        <div id="globalSearchAppointmentsEmpty" class="empty-state">
          No appointments found for this search.
        </div>
        <div class="table-wrapper" id="globalSearchAppointmentsTableWrapper">
          <table id="globalSearchAppointmentsTable">
            <thead>
              <tr>
                <th style="width: 18%;">Date</th>
                <th style="width: 12%;">Time</th>
                <th style="width: 25%;">Customer</th>
                <th style="width: 25%;">Vehicle</th>
                <th style="width: 20%;">Services</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <section class="global-search-section">
        <h3>Invoices</h3>
        <div id="globalSearchInvoicesEmpty" class="empty-state">
          No invoices found (invoices not wired yet).
        </div>
        <ul id="globalSearchInvoicesList" class="lookup-list"></ul>
      </section>
    </div>
  </div>
</div>

<div class="profile-drawer" id="profileDrawer" aria-hidden="true">
  <div class="profile-drawer__panel">
    <div class="profile-drawer__header">
      <div>
        <div class="profile-title" id="profileName"></div>
        <div class="profile-sub" id="profileSub"></div>
      </div>
      <button type="button" class="profile-close" id="profileClose">✕</button>
    </div>

    <div class="profile-body" id="profileBody"></div>

    <div class="profile-actions">
      <button type="button" id="profileCopyPhone">Copy Phone</button>
      <button type="button" id="profileCopyEmail">Copy Email</button>
      <button type="button" id="profileBackToList">Back to List</button>
    </div>
  </div>
</div>

<script src="scripts/config.js"></script>
<script src="assets/js/api-client.js"></script>
<script src="auth.js"></script>
<script src="assets/js/vehicle-dropdowns.js"></script>
<script src="customers.js"></script>
</body>
</html>
